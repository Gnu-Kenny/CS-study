# HTTP와 연계하는 웹 서버

## 5.1 1대로 멀테 도메인을 가능하게 하는 가상 호스트

- 하나의 HTTP 서버에 여러 개의 웹 사이트를 실행할 수 있다.

- 가상 호스트
  - 물리적으로는 서버가 1대지만 가상으로 여러 대가 있는 것처럼 설정하는 것이 가능

## 5.2 통신을 중계하는 프로그램: 프록시, 게이트웨이, 터널

- HTTP는 클라이언트 - 서버 이외에 프록시, 게이트웨이, 터널 등의 중계 프로그램과 서버 연계도 가능하다.

- 다른 서버에 리퀘스트를 중계하고 리스폰스를 클라이언트에 반환하는 역할을 담당한다.

### **프록시**

---

- 서버와 클라이언트의 양쪽 역할을 하는 중계 프로그램이다.

- 리퀘스트를 다른 서버에 전송한다.

- 클라이언트로부터 받은 리퀘스트 URI를 변경하지 않고 그 다음의 리소스를 가지고 있는 서버에 보낸다.

- 리소스 본체를 가진 서버를 오리진 서버라고 부른다.

- 오리진 서버로부터 되돌아온 리스폰스는 프록시 서버를 경유해서 클라이언트에 돌아온다.

- 프록시 사용 이유

  - 네트워크 대역의 효율적 사용
  - 특정 웹 사이트에 대한 액세스 제한
  - 액세스 로그 획득 정책 준수

- 프록시 사용 방법 분류
  - 캐시 사용 유무로 구분
  - 메시지 변경 유무로 구분

### 캐싱 프록시(Cashing Proxy)

- 프록시로 리스폰스 중계시 프록시 서버 상에 리소스 캐시를 보존해 두는 타입의 프록시
- 프록시에 같은 리소스에 리퀘스트가 온 경우 캐시를 리스폰스로서 되돌려 줌

### 투명 프록시(Transparent Proxy)

- 메시지 변경을 하지 않는 타입

- 메시지에 변경을 가하는 타입 -> 비투과 프록시

<br>

### **게이트웨이**

- 다른 서버를 중계하는서버

- 리퀘스트를 리소스를 보유한 서버인 것처럼 수신한다.

- 경우에 따라 클라이언트가 게이트웨이임을 인식 못할 수도 있다.

- 통신의 안정성을 높인다.
  - 클라이언트와 게이트웨이 사이를 암호화하는 방식 등을 통해 이루어짐
  - 데이터베이스에 접속해 SQL 쿼리 사용하여 데이터를 얻거나 결제 시스템 등과 연계할 때 사용되기도 한다.

### 터널

- 서로 떨어진 두 대의 클라이언트와 서버 사이를 중계하며 접속을 주선하는 중계 프로그램

- 요구에 따라 다른 서버와의 통신 경로를 확립한다.

- SSL 같은 암호화 통신을 통해 서버와 안전하게 통신을 하기 위해 사용한다.

- 터널 자체는 HTTP 리퀘스트를 해석하려고 하지 않는다.

## 리소스를 보관하는 캐시

- 프록시 서버와 클라이언트의 로컬 디스크에 보관된 리소스의 사본을 가리킨다.

- 서버 액세스를 줄임으로써 통신량과 통신 시간을 절약할 수 있다.

- 캐시 서버는 캐싱 프록시로 분류된다.

- 같은 데이터를 오리진 서버에 전송할 필요가 없게 하는 것이 장점이다.

### 캐시의 유효기간

- 오리진 서버에 있는 원래 리소스가 갱신되는 경우 캐시 서버의 데이터는 낡은 리소스를 그대로 보내게 된다.

- 따라서 캐시의 유효 기간 등에 의해 오리진 서버에 리소스의 유효성을 확인하거나 새로운 리소스를 다시 획득하러 가게 되는 경우가 있다.

### 클라이언트 측에도 캐시가 있다.

- 캐시 서버처럼 클라이언트가 사용하는 브라우저에도 캐시를 가질 수 있다.

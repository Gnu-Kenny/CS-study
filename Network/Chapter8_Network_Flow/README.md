# 네트워크의 전체 흐름 살펴보기

## 랜 카드에서의 데이터 전달과 처리

### 네트워크의 구성

- 응용 계층

  - 애플리케이션 등에서 사용하는 데이털르 송수신

- 전송 계층

  - 목적지에 데이터를 정확하게 전달

- 네트워크 계층

  - 다른 네트워크에 있는 목적지에 데이터를 전달

- 데이터 링크 계층

  - 랜에서 데이터를 송수신

- 물리 계층
  - 데이터를 전기 신호로 변환

## 컴퓨터의 데이터가 전기 신호로 변환되는 과정

1. 웹 브라우저에 URL을 입력하여 접속한다.

   - `http://www.bijo-linux.com`

2. 응용 계층

   - html 데이터를 얻기 위해 HTTP 메시지를 보낸다.

   - `GET /index.html HTTP/1.1`

3. 전송 계층

   - TCP 헤더가 붙는다.

     - 출발지 포트 번호

     - 목적지 포트 번호

4. 네트워크 계층

   - IP 헤더가 붙는다.

     - 출발지 IP 주소

     - 목적지 IP 주소

5. 데이터 링크 계층

   - 이더넷 헤더

     - MAC 주소

   - 트레일러

6. 물리 계층

   - 전기 신호로 변환

## 스위치와 라우터에서의 데이터 전달과 처리

### 스위치에서의 데이터 전달과 처리

- 스위치에서는 데이터 링크 계층에서 데이터를 전기 신호로 변환하여 라우터로 전송한다.

### 라우터에서의 데이터 전달과 처리

- 스위치에서 데이터가 전기 신호로 변환되어 라우터에 도착하면 라우터는 데이터 링크 계층에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교한다.

- 주소가 같으면 이더넷 헤더와 트레일러를 분리하는 역캡슐화 수행

- 네트워크 계층에 전달하고 자신의 라우팅 테이블과 목적지 IP 주소를 비교한다.

  - 라우팅 테이블에서 목적지 IP 주소의 경로를 알 수 있으므로 라우팅을 할 수 있다.

- 다음으로 데이터 링크 계층으로 전달하여 이더넷 헤더와 트레일러를 붙인 후 물리 계층에서 데이터를 전기 신호로 변환하여 네트워크로 전달한다.

- 라우터 A에서 출발한 전기 신호가 라우터 B에 도착하면 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교한다.

- 주소가 같으면 역캡슐화 수행한다.

- 네트워크 계층으로 전달되면 자신의 라우팅 테이블과 목적지 IP 주소를 비교한다.

- 출발지 IP 주소를 도착한 라우터 B의 내부 IP 주소로 변경

- 데이터 링크 계층에 전달하여 스위치에 전달되도록 헤더와 트레일러를 붙인다.

- 물리 계층에서 데이터를 진기 신호로 변환하여 네트워크로 전달

## 웹 서버에서의 데이터 전달과 처리

### 웹 서버에서의 데이터 전달과 처리

- 데이터가 전기 신호로 웹 서버에 도착하면 웹 서버는 데이터 링크 계층에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교

- 주소가 같으면 이더넷 헤더와 트레일러를 분리하고 네트워크 계층에 전달

- 네트워크 계층에서는 목적지 IP 주소와 웹 서버의 IP 주소가 같은지 확인

- 주소가 같으면 IP 헤더를 분리하고 전송 계층에 전달

- 전송 계층에서는 목적지 포트 번호를 확인하여 어떤 애플리케이션으로 전달해야 되는지 판단

- TCP 헤더를 분리하여 응용 계층으로 전달
